<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../../../lib/echarts.min.js"></script>
</head>

<body>
    <div style="width: 800px; height: 400px;"></div>
    <button id="modify">修改数据</button>
    <button id="add">修改数据</button>

    <script>
        var mCharts = echarts.init(document.querySelector('div'))

        // x数据
        var xData = ["陈翔", "球球", "腿腿", "猪小明", "茅台", "冷檬", "妹大爷"]
        // y
        var yData = [89, 68, 90, 67, 88, 78, 90]

        var option = {
            title: {

            },

            // 反向
            xAxis: {
                type: "category"
            },

            yAxis: {
                type: "value",
                data: xData

            },

            series: [
                {
                    name: "语文",
                    type: "bar",
                    markPoint: {
                        data: [
                            {
                                type: 'max', name: "最大值"
                            },
                            {
                                type: 'min', name: '最小值'
                            }
                        ]
                    },

                    markLine: {
                        data: [
                            {
                                type: "average",
                                name: "平均值"
                            }
                        ]
                    },

                    label: {
                        
                        show: true,
                        rotate: 60,
                        position: "left"
                    },

                    // 柱的宽度
                    barWidth: '30%',
                    data: yData
                }
            ]
        }

        mCharts.setOption(option)

        /**
         * 修改数据
         * 新老option是相互合并关系
        */

        var modify = document.querySelector('#modify')
        modify.onclick = function () {
            var newArr = [81, 78, 90, 87, 98, 68, 70]
            var option = {
                series: [
                    // 只写变化的数据即可
                    {
                        data: newArr
                    }
                ]
            }

            mCharts.setOption(option)
        }

        /**
         * 添加数据
        */
        var add = document.querySelector('#add')
        add.addEventListener("click", function () {
            xData.push("万民庆")
            yData.push(100)
            var option = {
                xAxis: {
                    data: xData
                },

                series: {
                    data: yData
                }
            }

            mCharts.setOption(option)
        })
    </script>
</body>

</html>